/**
 * Bundle of @livelybone/scroll-get
 * Generated: 2020-02-06
 * Version: 5.0.2
 * License: MIT
 * Author: 2631541504@qq.com
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).ScrollGet={})}(this,function(e){"use strict";function s(e){return e.getBoundingClientRect()}function t(e){return e+(1-e)*e}function g(r,o,e){var i=e||t;return new Promise(function(t){var n=Date.now();!function e(t){window.requestAnimationFrame(function(){t()&&e(t)})}(function(){var e=i(Math.min(1,(Date.now()-n)/r));return o(e),!(1<=e)||(t(),!1)})})}function w(e){var t=e.children[e.children.length-1],n=function e(t,n){var r=1<arguments.length&&void 0!==n?n:0,o=function(e){if(e)return getComputedStyle?getComputedStyle(e):e.currentStyle}(t);return o&&"block"===o.display?e(t.children[t.children.length-1],Math.max(r,parseInt(o.marginBottom,10))):r}(t);return Math.max(0,e.scrollHeight-e.clientHeight-n)}function y(e){if(e.parentElement){var t=e.parentElement;return w(t)?t:y(t)}}e.animation=g,e.getMaxScrollTop=w,e.getNativeScrollbarWidth=function(e){var t=e||window,n=t===window;try{var r=n?window.nativeScrollbarWidth:null;if(!r||"number"!=typeof r.y||"number"!=typeof r.x){var o=n?document.createElement("div"):t;n&&(o.setAttribute("style","position:fixed;top:0;left:0;opacity:0;pointer-events:none;width:200px;height:200px;overflow:scroll"),document.body.appendChild(o)),r={y:o.offsetWidth-o.clientWidth,x:o.offsetHeight-o.clientHeight},n&&(window.nativeScrollbarWidth=r,document.body.removeChild(o))}return r}catch(e){return{y:17,x:17}}},e.getRect=s,e.getScrollParent=y,e.getViewElementsWhenScroll=function(c,a,l){if(0<a.length){var u=[];a.sort(function(e,t){return s(e).top-s(t).top});var e=function(e){var r=s(c),o=a.map(s),t=o.map(function(e,t){var n=e;return n.areaHeight=t!==o.length-1?o[t+1].top-n.top:n.height,n.viewAreaHeight=Math.max(0,r.height+n.areaHeight-(Math.max(n.top+n.areaHeight,r.top+r.height)-Math.min(r.top,n.top))),n.viewPercent=n.viewAreaHeight/n.areaHeight,{rect:n,element:a[t]}}),n=t[t.length-1],i=t.sort(function(e,t){return t.rect.viewPercent-e.rect.viewPercent}).filter(function(e){return 0<e.rect.viewPercent});i.length<1&&(n.rect.viewAreaHeight=n.rect.areaHeight,n.rect.viewPercent=1,i=[n]),i.length===u.length&&!i.some(function(e,t){return e.element!==u[t].element})||l(u=i,r,e)};return e(),c.addEventListener("scroll",e),function(){return c.removeEventListener("scroll",e)}}return function(){}},e.posRelativeToClient=function(e){var t=s(e);return{clientLeft:t.left,clientTop:t.top}},e.posRelativeToPage=function(e){for(var t={pageLeft:0,pageTop:0},n=e;n;)t.pageLeft+=n.offsetLeft,t.pageTop+=n.offsetTop,n=n.offsetParent;return t},e.scrollToElement=function e(t,n){var r=n||{},o=r.affectParent,i=r.rateFactor,c=r.offset,a=void 0===c?0:c,l=r.time,u=void 0===l?300:l,f=y(t);if(f){var d,h,p=function(){return e(f,{time:u,affectParent:o,rateFactor:i})};f===document.body?(d=w(document.body),h=document.body.scrollTop,d||(d=w(document.documentElement),f=document.documentElement,h=document.documentElement.scrollTop)):(d=w(f),h=f.scrollTop);var m=s(t).top-s(f).top,v=Math.min(m+a,d);if(v&&m&&0<d)return g(u,function(e){f.scrollTop=h+v*e},i).then(o?p:null);if(o)return p()}return Promise.resolve()},Object.defineProperty(e,"__esModule",{value:!0})});
